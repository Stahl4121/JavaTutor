<html>
    <head>
        <script src="codemirror.js"></script>
        <link rel="stylesheet" href="codemirror.css">
        <script src="clike.js"></script>
    </head>
    <body>

        <script>
            var codeMirror = CodeMirror(document.body, {
                value: "class Test {\n}",
                mode:  "text/x-java"
            });

            codeMirror.on("change", editorChanged);

            function editorChanged() {
                try {
                    webkit.messageHandlers.codeChanged.postMessage(
                                                                      {
                                                                       text: codeMirror.getValue()
                                                                      });
                } catch(err) {
                }
            }
        </script>
    </body>
</html>
